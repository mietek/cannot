// Start

.menu-button:before {
  transform: rotate(0deg);
  height: $icon-size;
  top: (ln(2) - $icon-size) / 2
}

.menu-button:after {
  opacity: 0;
  height: $icon-size;
  transform: rotate(0deg);
  top: (ln(2) - $icon-size) / 2
}


// End

.menu-button.open:before {
  transform: rotate(-180deg);
  height: $icon-stroke;
  top: (ln(2) - $icon-stroke) / 2;
}

.menu-button.open:after {
  opacity: 1;
  height: $icon-stroke;
  transform: rotate(-180deg);
  top: (ln(2) - $icon-stroke) / 2;
}


// Forwards

.menu-button.open {
  transition:
    ease(opacity, 1, 0);          // General menu-button transition
}

.menu-button.open:before {
  transition:
    ease(filter, 1, 0),           // General menu-button transition
    ease(-webkit-filter, 1, 0),   // General menu-button transition
    ease(height, 1, 0),           // Step 1
    ease(top, 1, 0),              // Step 1
    ease(transform, 2, 1);        // Step 2
}

.menu-button.open:after {
  transition:
    ease(filter, 1, 0),           // General menu-button transition
    ease(-webkit-filter, 1, 0),   // General menu-button transition
    ease(opacity, 0, 0),          // Step 0
    ease(height, 1, 0),           // Step 1
    ease(top, 1, 0),              // Step 1
    ease(transform, 2, 1);        // Step 2
}


// Backwards

.menu-button {
  transition:
    ease(opacity, 1, 0);          // General menu-button transition
}

.menu-button:before {
  transition:
    ease(filter, 1, 0),           // General menu-button transition
    ease(-webkit-filter, 1, 0),   // General menu-button transition
    ease(transform, 2, 0),        // Step 1
    ease(height, 1, 2),           // Step 2
    ease(top, 1, 2);              // Step 2
}

.menu-button:after {
  transition:
    ease(filter, 1, 0),           // General menu-button transition
    ease(-webkit-filter, 1, 0),   // General menu-button transition
    ease(transform, 2, 0),        // Step 1
    ease(height, 1, 2),           // Step 2
    ease(top, 1, 2),              // Step 2
    ease-out(opacity, 1, 3);      // Step 3
}
