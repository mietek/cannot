// Forwards

span.menu-button.open {
  @include frob-always {
    & {
      transition:
        ease(filter, 1, 0),           // General menu-button transition
        ease(-webkit-filter, 1, 0),   // General menu-button transition
        ease(opacity, 1, 0);          // General menu-button transition
    }
    &:before {
      transition:
        ease(filter, 1, 0),           // General menu-button transition
        ease(-webkit-filter, 1, 0),   // General menu-button transition
        ease(height, 1, 0),           // Step 1
        ease(top, 1, 0),              // Step 1
        ease(transform, 2, 1);        // Step 2
    }
    &:after {
      transition:
//        ease(filter, 1, 0),           // General menu-button transition
//        ease(-webkit-filter, 1, 0),   // General menu-button transition
        linear(opacity, 0, 0),        // Step 0
        ease(height, 1, 0),           // Step 1
        ease(top, 1, 0),              // Step 1
        ease(transform, 2, 1),        // Step 2
        ease(filter, 1, 3),           // Workaround
        ease(-webkit-filter, 1, 3);   // Workaround
    }
  }
}


// Backwards

span.menu-button {
  @include frob-always {
    & {
      transition:
        ease(filter, 1, 0),           // General menu-button transition
        ease(-webkit-filter, 1, 0),   // General menu-button transition
        ease(opacity, 1, 0);          // General menu-button transition
    }
    &:before {
      transition:
        ease(filter, 1, 0),           // General menu-button transition
        ease(-webkit-filter, 1, 0),   // General menu-button transition
        ease(transform, 2, 0),        // Step 1
        ease(height, 1, 2),           // Step 2
        ease(top, 1, 2);              // Step 2
    }
    &:after {
      transition:
        linear(filter, 0, 0),         // Workaround
        linear(-webkit-filter, 0, 0), // Workaround
//        ease(filter, 1, 0),           // General menu-button transition
//        ease(-webkit-filter, 1, 0),   // General menu-button transition
        ease(transform, 2, 0),        // Step 1
        ease(height, 1, 2),           // Step 2
        ease(top, 1, 2),              // Step 2
        ease-out(opacity, 1, 3);      // Step 3
    }
  }
}
